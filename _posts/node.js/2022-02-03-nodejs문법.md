---
title: "Node.js 기본문법"
excerpt: "Node.js에 대해서 알아보자"
last_modified_at: 2022-02-16T18:03:16-19:00
categories:
  - Node.js
tags:
  - Node.js
  - Web
toc: true
toc_sticky: true
toc_label: "Node.js 기본문법"
---

## REPL

노드는 코드를 읽고(R), 해석하고(E), 결과물을 반환(P), 종료할 때까지 반복(L)합니다. 그래서 REPL이라고 합니다. 

![image](https://user-images.githubusercontent.com/72953874/152297089-0fb7f0fd-6043-423d-bd9e-ae11fd49a15c.png)
 
 이렇게 터미널에서 노드를 켠 후, 실행해보면 잘 출력되는 것을 볼 수 있습니다.

## JS 파일 실행하기

helloWorld.js 파일을 생성후 아래와 같이 실행하면 됩니다.

![image](https://user-images.githubusercontent.com/72953874/152297567-a58a56e6-f82c-4ffd-90db-76563ec9aefc.png)

## 모듈로 만들기

노드는 코드를 모듈로 만들 수 있다는 점에서 브라우저의 자바스크립트와 다릅니다. **모듈**이란 특정한 기능을 하는 함수나 변수들의 집합입니다. 한번 해봅시다.

```javascript
//var.js
const odd = "홀수입니다.";
const even = "짝수입니다.";

module.exports = {
  odd,
  even,
};
```
module.exports에 담은 것들은 모듈로서 사용 가능합니다.
<br>

```javascript
//func.js
const { odd, even } = require('./var');

function checkOddOrEven(num) {
  if (num % 2){
    return odd;
  } 
  return even;
}

module.exports = checkOddOrEven;
```
require 함수 안에 불러올 모듈의 경로를 적습니다. module.exports에는 객체만 대입해야 하는 것이 아니라 함수나 변수를 대입해도 됩니다.

<br>

```javascript
//index.js
const { odd, even } = require('./var');
const checkNumber = require('./func');

function checkStringOddOrEven(str) {
  if (str.length % 2) {
    return odd;
  }
  return even;
}

console.log(checkNumber(10));
console.log(checkStringOddOrEven('hello'));
```

<br>

![image](https://user-images.githubusercontent.com/72953874/152299241-ca5b9a7c-7523-49d3-976e-988c6182b8c6.png)

잘 실행되는 것을 볼 수 있습니다.

<br>

## 노드 내장 객체

### global

global 객체는 window와 같은 전역 객체입니다. 

#### console

노드에서는 console은 global 객체에 들어있습니다. 사용해봅시다.

```javascript
const string = 'abc';
const number = 1;
const boolean = true;
const obj = {
    outside:{
        inside: {
            key:'value',
        },
    },
};

console.time('전체 시간');
console.log('평범한 로그입니다 쉼표로 구분해 여러 값을 찍을 수 있습니다.')
console.log(string, number, boolean);
console.error('에러 메시지는 console.error에 담아주세요');

console.table([{name: '제로', birth: 1994}, {name: 'hero', birth: 1998}]);

console.dir(obj, {colors: false, depth: 2});
console.dir(obj, {colors: true, depth: 1});

console.time('시간 측정');
for(let i = 0; i < 100000; i++){}
console.timeEnd('시간 측정');

function b() {
    console.trace('에러 추적');
}

function a() {
    b();
}

a();

console.timeEnd('전체 시간');
```

![image](https://user-images.githubusercontent.com/72953874/154045885-cce86b7e-c73f-443d-b36d-474dd030d190.png)

- console.time(레이블): console.timeEnd(레이블)과 대응되어 같은 레이블을 가진 time과 timeEnd 사이의 시간을 측정합니다.
- console.log(내용): 평범한 로그를 콘솔에 표시합니다.
- console.error(에러 내용): 에러 내용을 콘솔에 표시합니다.
- console.table(배열) 객체의 속성들이 테이블 형식으로 표현됩니다.
- console.dir(객체, 옵션): 객체를 콘솔에 표시할 때 사용합니다.
- console.trace(레이블): 에러가 어디서 발생했는지 추적할 수 있게 합니다.

<br>

#### 타이머

- setTimeout(콜백 함수, 밀리초): 밀리초 이후에 콜백함수를 실행합니다.
- setInterval(콜백 함수, 밀리초): 밀리초마다 콜백함수를 실행합니다.
- setImmediate(콜백 함수): 콜백 함수를 즉시 실행합니다.

- clearTimeout(아이디): setTimeout을 취소합니다.
- clearInterval(아이디): setInterval을 취소합니다.
- clearImmediate(아이디): setImmediate를 취소합니다.

<br>

#### __filename, __dirname

- 현재 파일명과 현재 파일 경로입니다.
<br>

#### module, exports, require

1. module, exports

```javascript
exports.odd = '홀수입니다';
exports.even = '짝수입니다.';
```
위와 같이 exports만으로 모듈을 만들 수도 있습니다. 또한 (module.exports === exports)를 입력하면 true가 나오게됩니다.<br>
주의해야할 점은 exports객체를 사용할 때에는 객체만 사용할 수 있습니다. 또한 exports와 module.exports는 동시에 사용하지 않는 것이 좋습니다.<br><br>

2. require

```javascript
console.log('require이 가장 위에 오지 않아도 됩니다.')

module.exports = '저를 찾아보세요.';

require('./var');

console.log('require.cache 입니다.');
console.log(require.cache);
console.log('require.main입니다.');
console.log(require.main === module);
console.log(require.main.filename);
```
![image](https://user-images.githubusercontent.com/72953874/154224950-4d3b85a7-fce7-4733-b039-79739e13420f.png)

- require, module.exports은 맨 위에 오지않아도 됩니다.
- require.cache의 속성값에는 각 파일의 모듈 객체가 들어있습니다. 한 번 require 한 파일은 다음 번에 새로 불러오지 않고 require.cache에 있는 것이 재사용됩니다.
- require.main은 노드 실행 시 첫 모듈을 가리킵니다.
- 첫 모듈의 이름을 알아보려면 require.main.filename으로 확인하면 됩니다.
- 모듈 사용시 서로가 서로를 require(순환참조) 한다면 순환참조되는 대상을 빈 객체로 만들어버립니다.
<br>


#### process

- process 객체는 현재 실행되고 있는 노드 프로세스에 대한 정보를 담고 있습니다.

![image](https://user-images.githubusercontent.com/72953874/154226286-43b7b5c8-6654-4090-adcd-a96385fa1b41.png)

- process.version 설치된 노드의 버젼
- process.arch 프로세서 아키텍처 정보
- process.platform 운영체제 플랫폼
- process.pid 프로세스의 아이디
- process.uptime() 프로세스가 시작된 후 흐른 시간
- process.execPath 노드의 경로
- process.cwd() 현재 프로세스가 실행되는 위치
- process.upuUsage() 현재 cpu 사용량

##### process.env

- 시스템 환경 변수입니다.
- 유출되면 안되는 서버나 데이터베이스의 비밀번호, API 키들을 저장하는 공간으로도 사용됩니다.

```javascript
const secretId = process.env.SECRET_ID;
```

##### process.nextTick(콜백)

- 이벤트 루프가 다른 콜백 함수들보다 nextTick의 콜백 함수를 우선으로 처리하도록 만듭니다.

```javascript
setImmediate(() -> {
  console.log('immediate');
})

process.nextTick(() => {
  console.log('nextTick');
})

setTimeout(() => {
  console.log('timeout');
}, 0);
```

![image](https://user-images.githubusercontent.com/72953874/154227270-11d26373-e347-4a3d-8b8c-daa657ef8ba7.png)
<br><br>

##### process.exit(코드)

- 실행 중인 노드 프로세스를 종료합니다.

<br><br>

## 노드 내장 모듈

### os

1. os.arch() process.arch와 동일합니다.
2. os.patform() process.platform과 동일합니다
3. os.type() 운영체제의 종류를 보여줍니다.
4. os.uptime() 운영체제 부팅 이후 흐른시간(초)을 보여줍니다.
5. os.hostname() 컴퓨터의 이름을 보여줍니다.
6. os.release() 운영체제의 버젼을 보여줍니다.
7. os.homedir() 홈디렉터리 경로를 보여줍니다.
8. os.tmpdir() 임시 파일 저장 경로를 보여줍니다.
9. os.cpus() 컴퓨터의 코어 정보를 보여줍니다.
10. os.freemem() 사용 가능한 메모리를 보여줍니다.
11. os.totalmem() 전체 메모리 용량을 보여줍니다.

<br>

### path

- 폴더와 파일의 경로를 쉽게 조작하도록 도와주는 모듈입니다.

[노드js 홈페이지](https://nodejs.org/api/path.html)를 참조합시다.
<br><br>

### url 

## 참고문헌

![image](https://user-images.githubusercontent.com/72953874/151500796-1e8c34c5-23fb-45d0-bbc7-20693430e9d7.png)

저자 조현영 | 길벗 |2020.07.25
페이지 756 | ISBN 9791165212308|개정 2판